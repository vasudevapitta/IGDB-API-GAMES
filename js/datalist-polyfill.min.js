/*
* Datalist polyfill - https://github.com/mfranzke/datalist-polyfill
* @license Copyright(c) 2017 by Maximilian Franzke
* Supported by Christian, Johannes, @mitchhentges, @mertenhanisch, @ailintom, @Kravimir, @mischah, @hryamzik, @ottoville, @IceCreamYou, @wlekin, @eddr, @beebee1987 and @mricherzhagen - many thanks for that !
*/
!function(){"use strict";var e=window.document;if("list"in e.createElement("input")&&Boolean(e.createElement("datalist")&&window.HTMLDataListElement))return!1;!function(t){t&&t.prototype&&void 0===t.prototype.list&&Object.defineProperty(t.prototype,"list",{get:function(){return"object"==typeof this&&this instanceof t?e.getElementById(this.getAttribute("list")):null}})}(window.HTMLInputElement),function(e){e&&e.prototype&&void 0===e.prototype.options&&Object.defineProperty(e.prototype,"options",{get:function(){return"object"==typeof this&&this instanceof e?this.getElementsByTagName("option"):null}})}(window.HTMLElement);var t=!1,i=13,n=27,a=38,l=40,o=" / ",r=["text","email","number","search","tel","url"],s="polyfilled",u="polyfilling";window.addEventListener("touchstart",function e(){t=!0,window.removeEventListener("touchstart",e)});var d=window.MutationObserver||window.WebKitMutationObserver,p;void 0!==d&&(p=new d(function(t){var i=!1;if(t.forEach(function(e){for(var t=0;t<e.addedNodes.length;++t)"datalist"===e.target.tagName.toLowerCase()&&(i=e.target)}),i){var n=e.querySelector('[list="'+i.id+'"]');""!==n.value&&h(y(i,n).length,i.getElementsByClassName("polyfilling")[0])}}));var c=function(e){var i=e.target,n=i.list;if(i.tagName&&"input"===i.tagName.toLowerCase()&&null!==n){var a=n.getElementsByClassName("polyfilling")[0]||v(i,n);if(void 0!==a){var l=!1,o=38===e.keyCode||40===e.keyCode;if(27!==e.keyCode&&13!==e.keyCode&&(""!==i.value||o)){y(n,i).length>0&&(l=!0);var r=0,s=a.options.length-1;t?a.selectedIndex=0:o&&(a.selectedIndex=38===e.keyCode?s:0,a.focus())}h(l,a)}}},y=function(i,n){void 0!==p&&p.disconnect();var a=i.getElementsByClassName("polyfilling")[0]||v(n,i),l=n.value,o=e.createDocumentFragment(),r=e.createDocumentFragment();"email"===n.type&&n.multiple&&(l=l.substring(l.lastIndexOf(",")+1)),Array.prototype.slice.call(i.querySelectorAll("option:not(:disabled)")).sort(function(e,t){return e.value.localeCompare(t.value)}).forEach(function(e){var t=e.value;if(""!==t&&-1!==t.toLowerCase().indexOf(l.toLowerCase())&&!1===e.disabled){var i=e.getAttribute("label"),n=e.text,a=n.substr(0,t.length+" / ".length),s=t+" / ";n&&!i&&n!==t&&a!==s?e.innerText=t+" / "+n:e.text||(e.innerText=i||t),o.appendChild(e)}else r.appendChild(e)}),a.appendChild(o);var s=a.options.length;return a.size=s>10?10:s,a.multiple=!t&&s<2,(i.getElementsByClassName("ie9_fix")[0]||i).appendChild(r),void 0!==p&&p.observe(i,{childList:!0}),a.options},f=function(e){var t=e.target,i=t.list;if(t.tagName&&"input"===t.tagName.toLowerCase()&&null!==i){var n=e.type,a=i.getElementsByClassName("polyfilling")[0]||v(t,i),l=a&&a.querySelector("option:not(:disabled)")&&("focusin"===n&&""!==t.value||e.relatedTarget&&e.relatedTarget===a);(" "+t.className+" ").indexOf(" polyfilled ")<0&&(t.setAttribute("autocomplete","off"),t.setAttribute("role","textbox"),t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-owns",t.getAttribute("list")),"focusin"===n?(t.addEventListener("keyup",c),t.addEventListener("focusout",f,!0)):"blur"===n&&(t.removeEventListener("keyup",c),t.removeEventListener("focusout",f,!0)),t.className+=" polyfilled"),h(l,a)}},v=function(i,n){if(r.indexOf(i.type)>-1&&null!==n){var a=i.getClientRects(),l=window.getComputedStyle(i),o=e.createElement("select");if(o.setAttribute("class","polyfilling"),o.style.position="absolute",h(!1,o),o.setAttribute("tabindex","-1"),o.setAttribute("aria-live","polite"),o.setAttribute("role","listbox"),t||o.setAttribute("aria-multiselectable","false"),"block"===l.getPropertyValue("display")?o.style.marginTop="-"+l.getPropertyValue("margin-bottom"):("rtl"===l.getPropertyValue("direction")?o.style.marginRight="-"+(a[0].width+parseFloat(l.getPropertyValue("margin-left")))+"px":o.style.marginLeft="-"+(a[0].width+parseFloat(l.getPropertyValue("margin-right")))+"px",o.style.marginTop=parseInt(a[0].height+(i.offsetTop-n.offsetTop),10)+"px"),o.style.borderRadius=l.getPropertyValue("border-radius"),o.style.minWidth=a[0].width+"px",t){var s=e.createElement("option");s.innerText=n.title,s.disabled=!0,s.setAttribute("class","message"),o.appendChild(s)}return n.appendChild(o),t?o.addEventListener("change",m):o.addEventListener("click",m),o.addEventListener("blur",m),o.addEventListener("keydown",m),o.addEventListener("keypress",g),o}},g=function(t){var i=t.target;if(i.tagName&&"select"===i.tagName.toLowerCase()){var n=i.parentNode,a=e.querySelector('input[list="'+n.id+'"]');null===a||!t.key||"Backspace"!==t.key&&1!==t.key.length||(a.focus(),"Backspace"===t.key?(a.value=a.value.substr(0,a.value.length-1),b(a)):a.value+=t.key,y(n,a))}},m=function(t){var i=t.target;if(i.tagName&&"select"===i.tagName.toLowerCase()){var n=i.parentNode,a=e.querySelector('input[list="'+n.id+'"]'),l=i.value,o=t.type,r="keydown"===o&&13!==t.keyCode&&27!==t.keyCode;if(null!==a){if(("change"===o||"click"===o||"keydown"===o&&(13===t.keyCode||"Tab"===t.key))&&void 0!==l&&l.length>0&&l!==n.title){var s;a.value="email"===a.type&&a.multiple&&(s=a.value.lastIndexOf(","))>-1?a.value.slice(0,s)+","+l:a.value=l,b(a),"Tab"!==t.key&&a.focus(),r=!1}else"keydown"===o&&27===t.keyCode&&a.focus();h(r,i)}}},b=function(t){var i;"function"==typeof Event?i=new Event("input",{bubbles:!0}):(i=e.createEvent("Event"),i.initEvent("input",!0,!1)),t.dispatchEvent(i)},h=function(t,i){t?i.removeAttribute("hidden"):i.setAttributeNode(e.createAttribute("hidden")),i.setAttribute("aria-hidden",(!t).toString())};e.addEventListener("focusin",f,!0)}();